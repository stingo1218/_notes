# cha1

dbms功能

> 数据库管理系统（DBMS）是位于操作系统与用户之间的一个数据管理软件，它主要功能包括以下几个方面：
>
> ·数据定义功能 DBMS提供数据描述语言（DDL），用户可通过它来定义数据。
>
> ·数据操纵功能 DBMS还提供数据操纵语言（DML），实现对数据库的基本操作：查询、插入、删除和修改。
>
> ·数据库的运行管理 这是DBMS运行时的核心部分，它包括开发控制，安全性检查，完整性约束条件的检查和执行，数据库的内容维护等。
>
> ·数据库的建立和维护功能 它包括数据库初始数据的输入及转换，数据库的转储与恢复，数据库的重组功能和性能的监视与分析功能等。

DB DBMS DBS(人机)之间的关系

> - 什么是数据库管理系统
>   位于用户与操作系统之间的一层数据管理软件
>   是基础软件，是一个大型复杂的软件系统 
> - 数据库系统的构成
>   数据库
>   数据库管理系统（及其应用开发工具）
>   应用程序
>   数据库管理员  
>
> ![image-20211125114357760](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20211125114357760.png)

1. 三级模式结构
   - 数据独立性
     - 逻辑
     
       > 当模式改变时，数据库管理员对外模式／模式映象作相应改变，使外模式保持不变
       > 应用程序是依据数据的外模式编写的，应用程序不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性
     
     - 物理
     
       > 当数据库的存储结构改变了（例如选用了另一种存储结构），数据库管理员修改模式／内模式映象，使模式保持不变。
       > 应用程序不受影响。保证了数据与程序的物理独立性，简称数据的物理独立性。
     
       

![image-20211125114629805](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20211125114629805.png)

1. 模式（也称逻辑模式）---一个数据库只有一个模式
   数据库中全体数据的逻辑结构和特征的描述
   所有用户的公共数据视图
   - 模式的地位：是数据库系统模式结构的中间层
     与数据的物理存储细节和硬件环境无关
     与具体的应用程序、开发工具及高级程序设计语言无关
   - 模式的定义
     数据的逻辑结构（数据项的名字、类型、取值范围等）
     数据之间的联系
     数据有关的安全性、完整性要求
2. 外模式（也称子模式或用户模式）
   数据库用户（包括应用程序员和最终用户）使用的局部数据的逻辑结构和特征的描述
   数据库用户的数据视图，是与某一应用有关的数据的逻辑表示
   - 外模式的地位：介于模式与应用之间
     模式与外模式的关系：一对多
     外模式通常是模式的子集
     一个数据库可以有多个外模式。反映了不同的用户的应用需求、看待数据的方式、对数据保密的要求
     对模式中同一数据，在外模式中的结构、类型、长度、保密级别等都可以不同
     外模式与应用的关系：一对多
     同一外模式也可以为某一用户的多个应用系统所使用
     但一个应用程序只能使用一个外模式
   - 外模式的用途
     保证数据库安全性的一个有力措施
     每个用户只能看见和访问所对应的外模式中的数据
3. 内模式（也称存储模式）
   是数据物理结构和存储方式的描述
   是数据在数据库内部的表示方式
   记录的存储方式（例如，顺序存储，按照B树结构存储，
                                   按hash方法存储等）
   索引的组织方式
   数据是否压缩存储
   数据是否加密
   数据存储记录结构的规定
   一个数据库只有一个内模式

1. ~~层次网状~~

# cha2

1. 关系完整性

> **实体完整性和参照完整性**
> 关系模型必须满足的完整性约束条件称为关系的两个不变性，应该由关系系统自动支持
>
> - *实体完整性*
>
>   （1）实体完整性规则是针对基本关系而言的。
>            一个基本表通常对应现实世界的一个实体集。
>   （2）现实世界中的实体是可区分的，即它们具有某种唯一性标识。
>   （3）关系模型中以主码作为唯一性标识。
>   （4）主码中的属性即主属性不能取空值。
>      主属性取空值，就说明存在某个不可标识的实体，即存在不可区分的实体，这与第（2）点相矛盾，因此这个规则称为实体完整性
>   
> - *参照完整性*
>
>   也称为引用完整性
>   • 现实世界中的实体之间往往存在着某种联系，在关系模型中，实体以及实体之间的联系都是用关系来表示的，这样就自然存在着关系与关系之间的引用
>   • 参照完整性就是描述实体之间的联系的
>   • 参照完整性一般是指多个实体或关系之间的关联关系
>
>   ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190830090038391.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyODg0NDgy,size_16,color_FFFFFF,t_70)
>
>   此完整性涉及到了外键：
>   • 参照完整性规则就是定义外键与被参照的主键之间的引用规则
>   • 外键一般应符合如下要求：
>   – 或者值为空
>   – 或者等于其所参照的关系中的某个元组的主键值
>
> **用户定义的完整性**
> • 也称为域完整性或语义完整性
> • 是针对某一具体应用领域定义的数据约束条件
> • 反映某一具体应用所涉及的数据必须满足应用语义的要求
> • 实际上就是指明关系中属性的取值范围，防止属性的值与应用语义矛盾
> • 关系模型应提供定义和检验这类完整性的机制，以便用统一的系统方法处理它们，而不要由应用程序承担这一功能

# cha3 SQL

20分 的 sql语句 1个2分

​	数据查询更新  基于三张表

~~视图索引~~



# cha4

数据库的安全防护措施有5个

1. ## 用户标识和鉴定

   1. **静态口令鉴别**
      静态口令一般由用户自己设定，这些口令是静态不变的
      2. **动态口令鉴别**
         口令是动态变化的，每次鉴别时均需使用动态产 ` 生的新口令登录数据库管理系统，即采用一次一密的方法
   3. **生物特征鉴别**
      通过生物特征进行认证的技术，生物特征如指纹、虹膜和掌纹等(图像模式识别)
   4. **智能卡鉴别**
      智能卡是一种不可复制的硬件，内置集成电路的芯片，具有硬件加密功能

2. ## 存取控制

   ### 4.2.2存取控制

   #### 4.2.2.1**存取控制机制组成**

   - 定义用户权限，并将用户权限登记到数据字典中
     - 用户对某一数据对象的操作权力称为权限 
     - DBMS提供适当的语言来定义用户权限，存放在数据字典中，称做安全规则或授权规则 

   #### 4.2.2.2**合法权限检查** 

   - 用户发出存取数据库操作请求

   - DBMS查找数据字典，进行合法权限检查

   用户权限定义和合法权检查机制一起组成了数据库管理系统的存取控制子系统

   #### 4.2.2.3常用存取控制方法

   **自主存取控制**（Discretionary Access Control ，简称DAC）

   -  C2级
   -  用户对不同的数据对象有不同的存取权限
   -  不同的用户对同一对象也有不同的权限
   -  用户还可将其拥有的存取权限转授给其他用户

   **强制存取控制**（Mandatory Access Control，简称 MAC）

   - B1级
   - 每一个数据对象被标以一定的密级
   - 每一个用户也被授予某一个级别的许可证
   - 对于任意一个对象，只有具有**合法许可证**的用户才可以存取
   - 不认用户,只认许可证

   ### 4.2.3 自主存取控制方法

   通过 SQL 的**GRANT** 语句和**REVOKE** 语句实现

   **用户权限组成**

   - 数据对象
   - 操作类型

   定义用户存取权限：定义用户可以在哪些数据库对象上进行哪些类型的操作

   定义存取权限称为**授权** 

   **关系数据库系统中存取控制对象** :

   | 对象类型       | 对象                                                  | 操  作 类 型                                                 |
   | -------------- | :---------------------------------------------------- | ------------------------------------------------------------ |
   | 数据库    模式 | 模式                                                  | CREATE  SCHEMA                                               |
   | 基本表         | CREATE  TABLE，ALTER  TABLE                           |                                                              |
   | 视图           | CREATE  VIEW                                          |                                                              |
   | 索引           | CREATE  INDEX                                         |                                                              |
   | 数据           | 基本表和视图                                          | SELECT，INSERT，UPDATE，DELETE，REFERENCES，  ALL  PRIVILEGES |
   | 属性列         | SELECT，INSERT，UPDATE，  REFERENCES，ALL  PRIVILEGES |                                                              |

   ### 4.2.4 授权：授予与回收

   #### 4.2.4.1GRANT

   > 语义：将对指定操作对象的指定操作权限授予指定的用户 

   - 发出GRANT：
     - 数据库管理员
     - 数据库对象创建者（即属主Owner）
     - 拥有该权限的用户
   - 按受权限的用户 
     - 一个或多个具体用户
     - PUBLIC（即全体用户）  

   #### 4.2.4.2WITH GRANT OPTION子句:

   - 指定：可以再授予
   - 没有指定：不能传播

   **不允许循环授权**:

   ![image-20211014115432685](https://gitee.com/yonaspigeon/giteepicstore/raw/master/img/202110141154800.png)

   通过检测有向图是否存在回路

   ```sql
    [例4.1] 把查询Student表权限授给用户U1
         GRANT   SELECT 
         ON   TABLE   Student 
         TO   U1;
        #dba/创建者/wgo权限拥有者可以发出该授权
   ```

   ```sql
   [例4.2] 把对Student表和Course表的全部权限授予用户U2和U3
         GRANT ALL PRIVILIGES 
         ON TABLE Student,Course 
         TO U2,U3;
   ```

   ```sql
   [例4.3] 把对表SC的查询权限授予所有用户
        GRANT SELECT 
        ON TABLE SC 
   	 TO PUBLIC;
   ```

   ```sql
   [例4.4] 把查询Student表和修改学生学号的权限授给用户U4
   	  	GRANT UPDATE(Sno), SELECT 
   		ON TABLE Student 
   		TO U4;
   		#对属性列的授权时必须明确指出相应属性列名 
   ```

   ```sql
    [例4.5] 把对表SC的INSERT权限授予U5用户，并允许他再将此权限授予其他用户
       GRANT INSERT 
       ON TABLE SC 
       TO U5
       WITH GRANT OPTION;
      # 执行例4.5后，U5不仅拥有了对表SC的INSERT权限，
    #还可以传播此权限：
    [例4.6] GRANT INSERT 
                ON TABLE SC 
                TO U6
                WITH GRANT OPTION;
         #同样，U6还可以将此权限授予U7：
    [例4.7] GRANT INSERT 
   	         ON TABLE SC 
                TO U7;
        # 但U7不能再传播此权限。
   ```

   执行了例4.1~例4.7语句后学生-课程数据库中的用户权限定义表: 

   | 授权用户名 | 被授权用户名 |   数据库对象名    | 允许的操作类型 | 能否转授权 |
   | :--------: | :----------: | :---------------: | :------------: | :--------: |
   |    DBA     |      U1      |    关系Student    |     SELECT     |    不能    |
   |    DBA     |      U2      |    关系Student    |      ALL       |    不能    |
   |    DBA     |      U2      |    关系Course     |      ALL       |    不能    |
   |    DBA     |      U3      |    关系Student    |      ALL       |    不能    |
   |    DBA     |      U3      |    关系Course     |      ALL       |    不能    |
   |    DBA     |    PUBLIC    |      关系SC       |     SELECT     |    不能    |
   |    DBA     |      U4      |    关系Student    |     SELECT     |    不能    |
   |    DBA     |      U4      | 属性列Student.Sno |     UPDATE     |    不能    |
   |    DBA     |      U5      |      关系SC       |     INSERT     |     能     |
   |     U5     |      U6      |      关系SC       |     INSERT     |     能     |
   |     U6     |      U7      |      关系SC       |     INSERT     |    不能    |

   #### 4.2.4.2.REVOKE

   授予的权限可以由数据库管理员或其他授权者用REVOKE语句收回

   ```sql
   [例4.8] 把用户U4修改学生学号的权限收回
   		REVOKE UPDATE(Sno)
   		ON TABLE Student 
   		FROM U4;
   ```

   ```sql
   [例4.9] 收回所有用户对表SC的查询权限
   		REVOKE SELECT 
   		ON TABLE SC 
   		FROM PUBLIC;
   ```

   ```sql
   [例4.10] 把用户U5对SC表的INSERT权限收回
   		REVOKE INSERT 
   		ON TABLE SC 
   		FROM U5 CASCADE ;
   ```

   ​    执行例4.8~4.10语句后学生-课程数据库中的用户权限定义表:

   | 授权用户名 | 被授权用户名 | 数据库对象名 | 允许的操作类型 | 能否转授权 |
   | :--------: | :----------: | ------------ | :------------: | :--------: |
   |    DBA     |      U1      | 关系Student  |     SELECT     |    不能    |
   |    DBA     |      U2      | 关系Student  |      ALL       |    不能    |
   |    DBA     |      U2      | 关系Course   |      ALL       |    不能    |
   |    DBA     |      U3      | 关系Student  |      ALL       |    不能    |
   |    DBA     |      U3      | 关系Course   |      ALL       |    不能    |
   |    DBA     |      U4      | 关系Student  |     SELECT     |    不能    |

   **数据库管理员**：

   > - 拥有所有对象的所有权限
   > - 根据实际情况不同的权限授予不同的用户

   **用户**：

   > - 拥有自己建立的对象的全部的操作权限
   > - 可以使用GRANT，把权限授予其他用户

   **被授权的用户**

   > - 如果具有“继续授权”的许可，可以把获得的权限再授予其他用户

   *所有授予出去的权力在必要时又都可用REVOKE语句收回*

   ### 4.2.5 数据库角色(不是通用)

   数据库角色：被命名的一组与数据库操作相关的权限(不是所有数据库都有这个)

   - 角色是权限的集合 
   - 可以为一组具有相同权限的用户创建一个角色
   - 简化授权的过程

   //

   ### 4.2.6 强制存取控制方法

   自主存取控制缺点:可能存在数据的“无意泄露”

   原因：这种机制仅仅通过对数据的存取权限来进行安全控制，而数据本身并无安全性标记

   解决：对系统控制下的所有主客体实施强制存取控制策略
       

   #### 强制存取控制（MAC）

   - 保证更高程度的安全性
   - 用户不能直接感知或进行控制
   - 适用于对数据有严格而固定密级分类的部门
     -  军事部门
     -  政府部门

   在强制存取控制中，数据库管理系统所管理的全部实体被分为主体和客体两大类

   - **主体**是系统中的活动实体
     -  数据库管理系统所管理的实际用户
     -  代表用户的各进程
   - **客体**是系统中的被动实体，受主体操纵
     -  文件、基本表、索引、视图

   ##### 敏感度标记（Label）

    对于主体和客体，DBMS为它们每个实例（值）指派一个敏感度标记（Label）

    敏感度标记分成若干级别

   - 绝密（Top Secret，TS）
   - 机密（Secret，S）
   - 可信（Confidential，C）
   - 公开（Public，P）
   - TS>=S>=C>=P

   主体的敏感度标记称为许可证级别（Clearance Level）

   客体的敏感度标记称为密级（Classification Level）

   #####  强制存取控制规则

    	（1）仅当主体的许可证级别大于或等于客体的密级时，该主体才能读取相应的客体
    	
    	（2）仅当主体的许可证级别小于或等于客体的密级时，该主体才能写相应的客体

   强制存取控制（MAC）是对数据本身进行密级标记，无论数据如何复制，标记与数据是一个不可分的整体，只有符合密级标记要求的用户才可以操纵数据。

   

   实现强制存取控制时要首先实现自主存取控制

   - 原因：较高安全性级别提供的安全保护要包含较低级别的所有保护

   自主存取控制与强制存取控制共同构成数据库管理系统的安全机制

   ##### DAC+MAC安全检查

   ![image-20211019090447415](https://gitee.com/yonaspigeon/giteepicstore/raw/master/img/202112041655114.png)

   先进行自主存取控制检查，通过自主存取控制检查的数据对象再由系统进行强制存取控制检查，只有通过强制存取控制检查的数据对象方可存取。

3. 视图

   ## 4.3  视图机制

   - 把要保密的数据对无权存取这些数据的用户隐藏起来，对数据提供一定程度的安全保护 
   - 间接地实现支持存取谓词的用户权限定义

   > 每个学院教学办只能处理自己的学院学生

   ```sql
   [例4.14] 建立计算机系学生的视图，把对该视图的SELECT权限授于王平，把该视图上的所有操作权限授于张明 
   
            先建立计算机系学生的视图CS_Student
       CREATE VIEW CS_Student
       AS 
       SELECT  *
       FROM   Student
       WHERE  Sdept='CS';
       
       在视图上进一步定义存取权限
        GRANT  SELECT
        ON  CS_Student  
        TO 王平;
        
        GRANT ALL PRIVILIGES
        ON  CS_Student  
        TO  张明; 
   ```

   ## 

4. 审计

   ### 什么是审计

   启用一个专用的审计日志（Audit Log）,将用户对数据库的所有操作记录在上面

   审计员利用审计日志,监控数据库中的各种行为，找出非法存取数据的人、时间和内容

   C2以上安全级别的DBMS必须具有审计功能

   ### 审计功能的可选性

   - 审计很费时间和空间
   - DBA可以根据应用对安全性的要求，灵活地打开或关闭审计功能
   - 审计功能主要用于安全性要求较高的部门

   ### 1.审计事件

   - 服务器事件
     - 审计数据库服务器发生的事件
   - 系统权限
     - 对系统拥有的结构或模式对象进行操作的审计
     - 要求该操作的权限是通过系统权限获得的
   - 语句事件
     - 对SQL语句，如DDL、DML、DQL及DCL语句的审计
   - 模式对象事件
     - 对特定模式对象上进行的SELECT或DML操作的审计 	

   ### 2.审计功能

   **基本功能**

   - 提供多种审计查阅方式提供多种审计查阅方式
     - 多套审计规则：一般在初始化设定
   - 提供审计分析和报表功能
   - 审计日志管理功能
     - 防止审计员误删审计记录，审计日志必须先转储后删除
     - 对转储的审计记录文件提供完整性和保密性保护
     - 只允许审计员查阅和转储审计记录，不允许任何用户新增和修改审计记录等
   - 提供查询审计设置及审计记录信息的专门视图

5. ## 数据加密 

   ### 1.**数据加密**

   - 防止数据库中数据在存储和传输中失密的有效手段

   加密的基本思想

   - 根据一定的算法将原始数据—明文（Plain text）变换为不可直接识别的格式­—密文（Cipher text）

   加密方法

   - 存储加密
   - 传输加密

   

   ### 2.**存储加密**

   **透明存储加密**

   - 内核级加密保护方式，对用户完全透明

   - 将数据在写到磁盘时对数据进行加密，授权用户读取数据时再对其进行解密

   - 数据库的应用程序不需要做任何修改，只需在创建表语句中说明需加密的字段即可

     **内核级加密方法: 性能较好，安全完备性较高**

   **非透明存储加密**

   - 通过多个加密函数实现

   

   ### 3.**传输加密**

   - 链路加密
     - 在链路层进行加密
     - 传输信息由报头和报文两部分组成
     - 报文和报头均加密
   - 端到端加密
     - 在发送端加密，接收端解密
     - 只加密报文不加密报头
     - 所需密码设备数量相对较少，容易被非法监听者发现并从中获取敏感信息

   ![image-20211019092837072](https://gitee.com/yonaspigeon/giteepicstore/raw/master/img/202112041656121.png)

   **基于安全套接层协议SSL传输方案的实现思路：**

   > （1）确认通信双方端点的可靠性
   > 采用基于数字证书的服务器和客户端认证方式，通信时均首先向对方提供己方证书，然后使用本地的CA 信任列表和证书撤销列表对接收到的对方证书进行验证
   >
   > （2）协商加密算法和密钥
   > 确认双方端点的可靠性后，通信双方协商本次会话的加密算法与密钥
   >
   > （3）可信数据传输
   > 业务数据在被发送之前将被用某一组特定的密钥进行加密和消息摘要计算，以密文形式在网络上传输当业务数据被接收的时候，需用相同一组特定的密钥进行解密和摘要计算





# ~~cha5~~

# cha6关系数据理论

10分大题

3-5分小题

无记忆背诵

**候选码**-**非主属性**:

1. **部分2nf**
2. **传递3nf**

问第几范式,套定义

**给定一个关系模式+语义描述-------->判定第几范式**

![image-20211204223336814](https://gitee.com/yonaspigeon/giteepicstore/raw/master/img/202112042233890.png)

# cha7数据库的设计

会看书 抓重点 

**六大步骤**

分了几个阶段  6

- ~~需求分析~~
- 概念结构设计
- 逻辑结构设计----------逻辑设计和物理设计与选用的数据库管理系统密切相关
- 物理结构设计----------逻辑设计和物理设计与选用的数据库管理系统密切相关
- 数据库实施
- 数据库运行和维护 
  - **目标**
  - **任务**
  - **方法**

~~需求分析~~

**==概念==**

- 描述:实体 联系 属性 画er图 分的和总的

**==逻辑结构==**

- 转换规则:转换成关系模型

**物理结构不多**

- 选择存取方法和结构

实施运维



# ~~cha9查询优化~~

大量输入输出,效率差,需要优化

# cha10恢复

### 必须明确   **事务**  特性

**原子性**（Atomicity）不可拆分

- 事务是数据库的逻辑工作单位
  事务中包括的诸操作要么都做，要么都不做

**一致性**（Consistency）

事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态

*一致性状态*

- 数据库中只包含成功事务提交的结果

*不一致状态*

- 数据库系统运行中发生故障，有些事务尚未完成就被迫中断；
- 这些未完成事务对数据库所做的修改有一部分已写入物理数据库，这时数据库就处于一种不正确的状态 

> `银行转帐`：从帐号A中取出一万元，存入帐号B。
> 定义一个事务，该事务包括两个操作
>
> ![image-20211104110352442](https://gitee.com/yonaspigeon/giteepicstore/raw/master/img/202112050032115.png)
>
> 这两个操作要么全做，要么全不做
> 全做或者全不做，数据库都处于一致性状态。如果只做一个操作，用户逻辑上就会发生错误，少了一 万元，数据库就处于不一致性状态。

**隔离性**（Isolation）

一个事务的执行不能被其他事务干扰

- 一个事务内部的操作及使用的数据对其他并发事务是隔离的
- 并发执行的各个事务之间不能互相干扰

**持续性**（Durability ）

持续性也称永久性（Permanence）

一个事务一旦提交，它对数据库中数据的改变就应该是`永久性`的。

接下来的其他操作或故障不应该对其执行结果有任何影响。

### **数据库系统几类故障**

- 
- 

**恢复算法**     会自然语言描述算法

- **日志文件**
  - 作用:记录*事务*对数据库的*更新*操作的文件
    - 进行*事务故障恢复*
    - 进行*系统故障恢复*
    - 协助后备副本进行*介质故障恢复*
  - 写入原则

检查点的恢复技术---选择题

# cha11并发控制

封锁 封锁协议

​	不一致性

1.

2.

3. 

活锁死锁

2PL协议

可串行调度



# 题库

## 1

1. `数据库`是长期存储在计算机内的有组织可共享的数据集合
2. 数据库系统不仅包括数据库本身 还有相应的硬件软件和`各类相关人员`
3. 数据可系统阶段数据  `具有高度的物理独立性和一定程度的逻辑独立性`
4. 数据的正确有效和相容称之为数据的  `完整性`
5. `概念模型` 属于信息世界的模型,实际上是现实世界到机器世界的一个中间层次
6. 客户/服务期结构与其他数据库体系结构的根本区别在于 `网络开销小`(只返回字符,浏览器/服务器结构返回网页)
7. 数据库系统包括  `数据库 DBMS 和相关人员`
8. 数据库系统的数据独立性是指 `不会因为系统数据存储结构和数据逻辑结构的变化而影响应用程序`



## 2

1. 对关系模型叙述错误的是 `不具有连接操作的DBMS也可以是关系数据库系统`(没有连接操作的关系数据库不能称为关系数据库)
2. 关系数据库管理系统应该是先专门关系运算包括 `选择投影连接`
3. 在通常情况下,下面的关系中不可以作为关系数据库的关系是 `R4(学生号 学什么 简历)`(简历可以拆分)
4. 一个关系数据文件中的各条记录 ``
5. `关系模型`  由数据结构关系操作集合和完整性约束三部分组成

## 3

1. SQl语言是 `非过程化` 的语言易学习(if else 循环 都叫过程化语言)(非过程 一句话就是一个循环)
2. SQL语言是 `关系数据库`语言
3. SQL语言具有 `数据定义 数据操纵 数据控制` 的功能
4. SQL语言具有两种使用方式,分别成为`交互式SQL`和`嵌入式SQL`(嵌入在程序中)

## 4

1. DB2,ORACLE,PBASE属于 `关系完备的数据库`
2. 在数据库设计中,用ER图来描述信息结构但不涉及信息在计算机中的表示,处于数据库设计的 `概念设计` 阶段
3. ER图是数据库设计的工具之一,他适用于建立数据库的 `概念模型` 阶段
4. 在关系数据库设计中,设计关系模式是 `逻辑设计阶段` 的任务
5. 下面哪个不是数据库系统必须提供的数据控制功能 `可移植性`
6. 保护数据,防止未经授权的或不合法的使用造成的数据泄露,更改破坏.这是指数据库的 `安全性`
7. 数据库的  是指数据的正确性和相容性.
8. 事物的原子性是指 `要么做要么不做`
9. 事务是数据库数据库进行的基本工作单位.如果一个事务执行成功,责权不更新提交;如果一个事物执行失败,则已做过的更新恢复原状.好像整个事务未有过这些更新,这样保持了数据库处于 ` 一致性`状态
10. 关于死锁,下列说法正确的是 `只有出现并发操作时,才会发生死锁`
11. 对并发操作若不加以控制,可能会带来 `不一致` 问题
12. 数据库系统的并发控制的主要方法是采用 `封锁`机制
13. 若系统在运行过程中，由于某种原因，造成系统停止运行，致使事务在执行过程中以非控制方式终止，这时**内存中的信息丢失**，而存储在外存上的数据未受影响，这种情况称为 `系统故障` 。
14. 日志文件是用于记录 `对数据所有更新操作`
15. 并发操作会带来哪些数据不一致性 `丢失修改,不可重复读,脏读`
16. 在数据库的安全性控制中，为了保证用户只能存取他有权存取的数据，在授权的定义中，数据对象的 `范围越小` ，授权子系统就越灵活

## 6

1. 数据库物理设计完成后,进入数据库实施阶段,下列各项不属于实施阶段的工作是 `扩充功能` (盖楼)
2. 从e-r模型关系向关系模型转换时,一个m:n联系转换为关系模式时,该关系模式的关键字是____。
3. 当局部ER图合并成全局ER图时可能出现的冲突包括 `命名冲突,结构冲突,属性冲突`
4. 概念模型独立于 `硬件设备和DBMS`
5. 图6.3所示的ER图转换关系模式 (借书人,借阅日期,图书)  `3个`
6. 需求分析阶段得到的结果是 `数据字典描述的数据需求`
7. 概念结构设计阶段得到的结果是 `E-R图表示的概念模型`
8. 逻辑结构设计阶段得到的结果是 `某个DBMS所支持的数据模型`

## 7-10

1. 设有两个事务T1,T2其并发操作如图所示,下面评价正确的是 `该操作丢失修改`

2. 后援副本的用途是 `故障后的恢复`

3. 数据库恢复的基础是利用转储的冗余数据,这些转出的冗余数据指 `日志文件,数据库后备副本`

4. 假设有如下事务：+T1+:+在检查点之前提交；T2：在检查点之前开始执行，在检查点之后故障点之前提交；T3：在检查点之前开始执行，在故障点时还未完成；T4：在检查点之后开始执行，在故障点之前提交；T5：在检查点之后开始执行，在故障点时还未完成。+在利用具有检查点的恢复技术进行恢复时，（++）事务需要REDO。

   `2,4REDO 3,5UNDO`

5. 若事务T对数据对象A加上X锁,则

6. 若事务T对数据对象A加上S锁,则



## 大题

设有如下的关系模式：R(Sno,Sdept,Mname,Cno,Grade),其中：Sno--学生学号，Sdept--所在系，Mname--系主任姓名，Cno--课程号，Grade--成绩；基于以上条件回答如下问题：

 \1) 该关系模式属于第几范式；

 \2) 如果它不属于BC范式，请将其逐步分解成为BC范式。（写出详细分解步骤和过程）

> 1.找所有候选码---->(Sno,Cno)
>
> 2.找出主属性----->Sno,Cno
>
> 3.确定非主属性------>所有属性-主属性  Sdept Mname Grade
>
> 4.判断函数依赖------>部分依赖
>
> 5.第一范式

> R1(*Sno*,Sdept,Mname)---->2NF
>
> R2(*Sno,Cno*,Grade)---->2NF/3NF
>
> *******************************************************************************************************************************
>
> R11(Sno,Sdept)--->2NF/BC
>
> R12(Sdept,Mname))--->2NF/BC 
>
> R2(*Sno,Cno*,Grade)---->2NF/3NF
>
> *************************************************************************
>
> R11(Sno,Sdept)--->2NF/BC
>
> R12(Sdept,Mname))--->2NF/BC
>
> R2(*Sno,Cno*,Grade)---->2NF/3NF/BC

